import axios from 'axios'
import { getClientConfig, ClientProps, ClientConfig } from './config'
import { ApiClient as AutoGeneratedClient } from './gen/client'

export * as axios from 'axios'
export type { Message, Conversation, User, State, Event, ModelFile as File, Bot, Integration } from './gen'
export * from './gen/errors'

export class Client extends AutoGeneratedClient {
  public readonly config: ClientConfig

  public constructor(clientProps: ClientProps = {}) {
    const clientConfig = getClientConfig(clientProps)

    const axiosClient = axios.create({ ...clientConfig, url: undefined })

    super(undefined, clientConfig.url, axiosClient)

    this.config = clientConfig
  }
}
